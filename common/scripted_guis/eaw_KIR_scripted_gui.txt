scripted_gui = {
	KIR_diary_SG_trigger = {
		context_type = player_context
		parent_window_token = politics_tab
		
		visible = {
			ROOT = {
				OR = {
					original_tag = KIR
					original_tag = KIS
					original_tag = KIC
				}
				NOT = {
					has_country_flag = KIC_children_of_concord_flag
				}
				##No in-game option to tag switch over to KIS Protectorates/Commanderies, KAG, STH, or Nirik Warlord States, so no checks needed for those tags.
			}
		}
		
		window_name = "KIR_diary_SG_trigger_window"
		
		triggers = {
			KIR_diary_SG_glowy_shiny_sparkly_glimmery_shimmery_thing_visible = {
				NOT = {
					has_country_flag = KIR_diary_SG_clicked_flag
				}
			}
			KIR_diary_SG_new_entry_notification_visible = {
				check_variable = { KIR_diary_SG_new_entry_var > 0 }
			}
		}
		
		effects = {
			KIR_diary_SG_trigger_button_click = {
				set_country_flag = KIR_diary_SG_clicked_flag
				set_country_flag = KIR_toggled_diary_SG
				clr_country_flag = KIR_diary_SG_new_entry_flag
				set_variable = { KIR_diary_SG_new_entry_var = 0 }
				KIR_diary_SG_RESET_FRAMES = yes
				if = {
					limit = {
						original_tag = KIR
					}
					if = {
						limit = {
							has_government = democratic
						}
						set_variable = { protagonist_1_frame = 1 }
					}
					if = {
						limit = {
							has_government = neutrality
						}
						set_variable = { protagonist_2_frame = 1 }
					}
				}
				if = {
					limit = {
						original_tag = KIS
					}
					set_variable = { protagonist_3_frame = 1 }
				}
				if = {
					limit = {
						original_tag = KIC
					}
					set_variable = { protagonist_4_frame = 1 }
				}
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
		}
	}
	
	KIR_diary_SG = {
		context_type = player_context
		
		visible = {
			ROOT = {
				OR = {
					original_tag = KIR
					original_tag = KIS
					original_tag = KIC
				}
				has_country_flag = KIR_toggled_diary_SG
			}
		}
		
		window_name = "KIR_diary_SG_window"
		
		dirty = KIR_diary_SG_DIRTY
		
		properties = {
			KIR_diary_SG_protag_1_button = {
				frame = protagonist_1_frame
			}
			KIR_diary_SG_protag_2_button = {
				frame = protagonist_2_frame
			}
			KIR_diary_SG_protag_3_button = {
				frame = protagonist_3_frame
			}
			KIR_diary_SG_protag_4_button = {
				frame = protagonist_4_frame
			}
			KIR_diary_SG_protag_5_button = {
				frame = protagonist_5_frame
			}
			KIR_diary_SG_popup_toggle_button = {
				frame = KIR_diary_SG_popup_toggle_button_frame
			}
		}
		
		triggers = {
			KIR_diary_SG_protag_1_button_visible = {
				NOT = {
					has_country_flag = KIR_diary_SG_protag_1_UNAVAILABLE_flag
				}
			}
			KIR_diary_SG_protag_2_button_visible = {
				NOT = {
					has_country_flag = KIR_diary_SG_protag_2_UNAVAILABLE_flag
				}
			}
			KIR_diary_SG_protag_3_button_visible = {
				NOT = {
					has_country_flag = KIR_diary_SG_protag_3_UNAVAILABLE_flag
				}
			}
			KIR_diary_SG_protag_4_button_visible = {
				NOT = {
					has_country_flag = KIR_diary_SG_protag_4_UNAVAILABLE_flag
				}
			}
			KIR_diary_SG_protag_5_button_visible = {
				has_country_flag = KIR_diary_SG_protag_5_AVAILABLE_flag
			}
		}
		
		effects = {
			KIR_diary_SG_protag_1_button_click = {
				KIR_diary_SG_protag_1_button_click_effect = yes
			}
			KIR_diary_SG_protag_2_button_click = {
				KIR_diary_SG_protag_2_button_click_effect = yes
			}
			KIR_diary_SG_protag_3_button_click = {
				KIR_diary_SG_protag_3_button_click_effect = yes
			}
			KIR_diary_SG_protag_4_button_click = {
				KIR_diary_SG_protag_4_button_click_effect = yes
			}
			KIR_diary_SG_protag_5_button_click = {
				KIR_diary_SG_protag_5_button_click_effect = yes
			}
			KIR_diary_SG_popup_toggle_button_click = {
				if = {
					limit = {
						has_country_flag = KIR_diary_SG_popup_toggle_YES
					}
					clr_country_flag = KIR_diary_SG_popup_toggle_YES
					set_variable = { KIR_diary_SG_popup_toggle_button_frame = 1 }
					add_to_variable = { KIR_diary_SG_DIRTY = 1 }
				}
				else_if = {
					limit = {
						NOT = { has_country_flag = KIR_diary_SG_popup_toggle_YES }
					}
					set_country_flag = KIR_diary_SG_popup_toggle_YES
					set_variable = { KIR_diary_SG_popup_toggle_button_frame = 2 }
					add_to_variable = { KIR_diary_SG_DIRTY = 1 }
				}
			}
			KIR_diary_SG_ESC_click = {
				KIR_diary_SG_RESET_FRAMES = yes
				clr_country_flag = KIR_toggled_diary_SG
				set_variable = { KIR_diary_SG_entry_var = 0 }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
		}
	}
	
	KIR_diary_SG_protag_1 = {
		context_type = player_context
		parent_window_name = "KIR_diary_SG_window"
		
		visible = {
			ROOT = {
				OR = {
					original_tag = KIR
					original_tag = KIS
					original_tag = KIC
				}
				has_country_flag = KIR_toggled_diary_SG
				check_variable = { protagonist_1_frame = 1 }
			}
		}
		
		window_name = "KIR_diary_SG_protag_1_window"
		
		dirty = KIR_diary_SG_DIRTY
		
		triggers = {
			KIR_diary_SG_protag_1_entry_1_button_visible = {
				check_variable = { KIR_diary_SG_protag_1_button_var > 0 }
			}
			KIR_diary_SG_protag_1_entry_2_button_visible = {
				check_variable = { KIR_diary_SG_protag_1_button_var > 1 }
			}
			KIR_diary_SG_protag_1_entry_3_button_visible = {
				check_variable = { KIR_diary_SG_protag_1_button_var > 2 }
			}
			KIR_diary_SG_protag_1_entry_4_button_visible = {
				check_variable = { KIR_diary_SG_protag_1_button_var > 3 }
			}
			KIR_diary_SG_protag_1_entry_5_button_visible = {
				check_variable = { KIR_diary_SG_protag_1_button_var > 4 }
			}
			KIR_diary_SG_protag_1_entry_6_button_visible = {
				check_variable = { KIR_diary_SG_protag_1_button_var > 5 }
			}
			KIR_diary_SG_protag_1_entry_7_button_visible = {
				check_variable = { KIR_diary_SG_protag_1_button_var > 6 }
			}
			KIR_diary_SG_protag_1_entry_8_button_visible = {
				check_variable = { KIR_diary_SG_protag_1_button_var > 7 }
			}
			KIR_diary_SG_protag_1_entry_9_button_visible = {
				check_variable = { KIR_diary_SG_protag_1_button_var > 8 }
			}
			KIR_diary_SG_protag_1_entry_10_button_visible = {
				check_variable = { KIR_diary_SG_protag_1_button_var > 9 }
			}
			KIR_diary_SG_protag_1_entry_11_button_visible = {
				check_variable = { KIR_diary_SG_protag_1_button_var > 10 }
			}
			KIR_diary_SG_protag_1_entry_12_button_visible = {
				check_variable = { KIR_diary_SG_protag_1_button_var > 11 }
			}
		}
		
		effects = {
			KIR_diary_SG_protag_1_entry_1_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_1_entry_1_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_1_entry_2_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_1_entry_2_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_1_entry_3_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_1_entry_3_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_1_entry_4_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_1_entry_4_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_1_entry_5_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_1_entry_5_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_1_entry_6_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_1_entry_6_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_1_entry_7_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_1_entry_7_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_1_entry_8_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_1_entry_8_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_1_entry_9_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_1_entry_9_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_1_entry_10_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_1_entry_10_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_1_entry_11_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_1_entry_11_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_1_entry_12_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_1_entry_12_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
		}
	}
	
	KIR_diary_SG_protag_2 = {
		context_type = player_context
		parent_window_name = "KIR_diary_SG_window"
		
		visible = {
			ROOT = {
				OR = {
					original_tag = KIR
					original_tag = KIS
					original_tag = KIC
				}
				has_country_flag = KIR_toggled_diary_SG
				check_variable = { protagonist_2_frame = 1 }
			}
		}
		
		window_name = "KIR_diary_SG_protag_2_window"
		
		dirty = KIR_diary_SG_DIRTY
		
		triggers = {
			KIR_diary_SG_protag_2_entry_1_button_visible = {
				check_variable = { KIR_diary_SG_protag_2_button_var > 0 }
			}
			KIR_diary_SG_protag_2_entry_2_button_visible = {
				check_variable = { KIR_diary_SG_protag_2_button_var > 1 }
			}
			KIR_diary_SG_protag_2_entry_3_button_visible = {
				check_variable = { KIR_diary_SG_protag_2_button_var > 2 }
			}
			KIR_diary_SG_protag_2_entry_4_button_visible = {
				check_variable = { KIR_diary_SG_protag_2_button_var > 3 }
			}
			KIR_diary_SG_protag_2_entry_5_button_visible = {
				check_variable = { KIR_diary_SG_protag_2_button_var > 4 }
			}
			KIR_diary_SG_protag_2_entry_6_button_visible = {
				check_variable = { KIR_diary_SG_protag_2_button_var > 5 }
			}
			KIR_diary_SG_protag_2_entry_7_button_visible = {
				check_variable = { KIR_diary_SG_protag_2_button_var > 6 }
			}
			KIR_diary_SG_protag_2_entry_8_button_visible = {
				check_variable = { KIR_diary_SG_protag_2_button_var > 7 }
			}
			KIR_diary_SG_protag_2_entry_9_button_visible = {
				check_variable = { KIR_diary_SG_protag_2_button_var > 8 }
			}
			KIR_diary_SG_protag_2_entry_10_button_visible = {
				check_variable = { KIR_diary_SG_protag_2_button_var > 9 }
			}
			KIR_diary_SG_protag_2_entry_11_button_visible = {
				check_variable = { KIR_diary_SG_protag_2_button_var > 10 }
			}
			KIR_diary_SG_protag_2_entry_12_button_visible = {
				check_variable = { KIR_diary_SG_protag_2_button_var > 11 }
			}
		}
		
		effects = {
			KIR_diary_SG_protag_2_entry_1_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_2_entry_1_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_2_entry_2_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_2_entry_2_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_2_entry_3_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_2_entry_3_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_2_entry_4_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_2_entry_4_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_2_entry_5_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_2_entry_5_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_2_entry_6_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_2_entry_6_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_2_entry_7_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_2_entry_7_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_2_entry_8_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_2_entry_8_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_2_entry_9_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_2_entry_9_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_2_entry_10_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_2_entry_10_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_2_entry_11_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_2_entry_11_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_2_entry_12_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_2_entry_12_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
		}
	}
	
	KIR_diary_SG_protag_3 = {
		context_type = player_context
		parent_window_name = "KIR_diary_SG_window"
		
		visible = {
			ROOT = {
				OR = {
					original_tag = KIR
					original_tag = KIS
					original_tag = KIC
				}
				has_country_flag = KIR_toggled_diary_SG
				check_variable = { protagonist_3_frame = 1 }
			}
		}
		
		window_name = "KIR_diary_SG_protag_3_window"
		
		dirty = KIR_diary_SG_DIRTY
		
		triggers = {
			KIR_diary_SG_protag_3_entry_1_button_visible = {
				check_variable = { KIR_diary_SG_protag_3_button_var > 0 }
			}
			KIR_diary_SG_protag_3_entry_2_button_visible = {
				check_variable = { KIR_diary_SG_protag_3_button_var > 1 }
			}
			KIR_diary_SG_protag_3_entry_3_button_visible = {
				check_variable = { KIR_diary_SG_protag_3_button_var > 2 }
			}
			KIR_diary_SG_protag_3_entry_4_button_visible = {
				check_variable = { KIR_diary_SG_protag_3_button_var > 3 }
			}
			KIR_diary_SG_protag_3_entry_5_button_visible = {
				check_variable = { KIR_diary_SG_protag_3_button_var > 4 }
			}
			KIR_diary_SG_protag_3_entry_6_button_visible = {
				check_variable = { KIR_diary_SG_protag_3_button_var > 5 }
			}
			KIR_diary_SG_protag_3_entry_7_button_visible = {
				check_variable = { KIR_diary_SG_protag_3_button_var > 6 }
			}
			KIR_diary_SG_protag_3_entry_8_button_visible = {
				check_variable = { KIR_diary_SG_protag_3_button_var > 7 }
			}
			KIR_diary_SG_protag_3_entry_9_button_visible = {
				check_variable = { KIR_diary_SG_protag_3_button_var > 8 }
			}
			KIR_diary_SG_protag_3_entry_10_button_visible = {
				check_variable = { KIR_diary_SG_protag_3_button_var > 9 }
			}
			KIR_diary_SG_protag_3_entry_11_button_visible = {
				check_variable = { KIR_diary_SG_protag_3_button_var > 10 }
			}
			KIR_diary_SG_protag_3_entry_12_button_visible = {
				check_variable = { KIR_diary_SG_protag_3_button_var > 11 }
			}
			KIR_diary_SG_protag_3_entry_13_button_visible = {
				check_variable = { KIR_diary_SG_protag_3_button_var > 12 }
			}
		}
		
		effects = {
			KIR_diary_SG_protag_3_entry_1_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_3_entry_1_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_3_entry_2_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_3_entry_2_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_3_entry_3_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_3_entry_3_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_3_entry_4_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_3_entry_4_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_3_entry_5_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_3_entry_5_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_3_entry_6_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_3_entry_6_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_3_entry_7_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_3_entry_7_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_3_entry_8_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_3_entry_8_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_3_entry_9_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_3_entry_9_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_3_entry_10_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_3_entry_10_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_3_entry_11_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_3_entry_11_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_3_entry_12_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_3_entry_12_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_3_entry_13_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_3_entry_13_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
		}
	}
	
	KIR_diary_SG_protag_4 = {
		context_type = player_context
		parent_window_name = "KIR_diary_SG_window"
		
		visible = {
			ROOT = {
				OR = {
					original_tag = KIR
					original_tag = KIS
					original_tag = KIC
				}
				has_country_flag = KIR_toggled_diary_SG
				check_variable = { protagonist_4_frame = 1 }
			}
		}
		
		window_name = "KIR_diary_SG_protag_4_window"
		
		dirty = KIR_diary_SG_DIRTY
		
		triggers = {
			KIR_diary_SG_protag_4_entry_1_button_visible = {
				check_variable = { KIR_diary_SG_protag_4_button_var > 0 }
			}
			KIR_diary_SG_protag_4_entry_2_button_visible = {
				check_variable = { KIR_diary_SG_protag_4_button_var > 1 }
			}
			KIR_diary_SG_protag_4_entry_3_button_visible = {
				check_variable = { KIR_diary_SG_protag_4_button_var > 2 }
			}
			KIR_diary_SG_protag_4_entry_4_button_visible = {
				check_variable = { KIR_diary_SG_protag_4_button_var > 3 }
			}
			KIR_diary_SG_protag_4_entry_5_button_visible = {
				check_variable = { KIR_diary_SG_protag_4_button_var > 4 }
			}
			KIR_diary_SG_protag_4_entry_6_button_visible = {
				check_variable = { KIR_diary_SG_protag_4_button_var > 5 }
			}
			KIR_diary_SG_protag_4_entry_7_button_visible = {
				check_variable = { KIR_diary_SG_protag_4_button_var > 6 }
			}
			KIR_diary_SG_protag_4_entry_8_button_visible = {
				check_variable = { KIR_diary_SG_protag_4_button_var > 7 }
			}
			KIR_diary_SG_protag_4_entry_9_button_visible = {
				check_variable = { KIR_diary_SG_protag_4_button_var > 8 }
			}
			KIR_diary_SG_protag_4_entry_10_button_visible = {
				check_variable = { KIR_diary_SG_protag_4_button_var > 9 }
			}
			KIR_diary_SG_protag_4_entry_11_button_visible = {
				check_variable = { KIR_diary_SG_protag_4_button_var > 10 }
			}
			KIR_diary_SG_protag_4_entry_12_button_visible = {
				check_variable = { KIR_diary_SG_protag_4_button_var > 11 }
			}
		}
		
		effects = {
			KIR_diary_SG_protag_4_entry_1_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_4_entry_1_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_4_entry_2_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_4_entry_2_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_4_entry_3_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_4_entry_3_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_4_entry_4_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_4_entry_4_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_4_entry_5_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_4_entry_5_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_4_entry_6_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_4_entry_6_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_4_entry_7_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_4_entry_7_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_4_entry_8_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_4_entry_8_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_4_entry_9_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_4_entry_9_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_4_entry_10_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_4_entry_10_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_4_entry_11_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_4_entry_11_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_4_entry_12_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_4_entry_12_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
		}
	}
	
	KIR_diary_SG_protag_5 = {
		context_type = player_context
		parent_window_name = "KIR_diary_SG_window"
		
		visible = {
			ROOT = {
				original_tag = KIC
				has_country_flag = KIR_toggled_diary_SG
				check_variable = { protagonist_5_frame = 1 }
			}
		}
		
		window_name = "KIR_diary_SG_protag_5_window"
		
		dirty = KIR_diary_SG_DIRTY
		
		triggers = {
			KIR_diary_SG_protag_5_entry_1_button_visible = {
				check_variable = { KIR_diary_SG_protag_5_button_var > 0 }
			}
			KIR_diary_SG_protag_5_entry_2_button_visible = {
				check_variable = { KIR_diary_SG_protag_5_button_var > 1 }
			}
			KIR_diary_SG_protag_5_entry_3_button_visible = {
				check_variable = { KIR_diary_SG_protag_5_button_var > 2 }
			}
			KIR_diary_SG_protag_5_entry_4_button_visible = {
				check_variable = { KIR_diary_SG_protag_5_button_var > 3 }
			}
			KIR_diary_SG_protag_5_entry_5_button_visible = {
				check_variable = { KIR_diary_SG_protag_5_button_var > 4 }
			}
			KIR_diary_SG_protag_5_entry_6_button_visible = {
				check_variable = { KIR_diary_SG_protag_5_button_var > 5 }
			}
			KIR_diary_SG_protag_5_entry_7_button_visible = {
				check_variable = { KIR_diary_SG_protag_5_button_var > 6 }
			}
			KIR_diary_SG_protag_5_entry_8_button_visible = {
				check_variable = { KIR_diary_SG_protag_5_button_var > 7 }
			}
			KIR_diary_SG_protag_5_entry_9_button_visible = {
				check_variable = { KIR_diary_SG_protag_5_button_var > 8 }
			}
			KIR_diary_SG_protag_5_entry_10_button_visible = {
				check_variable = { KIR_diary_SG_protag_5_button_var > 9 }
			}
		}
		
		effects = {
			KIR_diary_SG_protag_5_entry_1_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_5_entry_1_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_5_entry_2_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_5_entry_2_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_5_entry_3_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_5_entry_3_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_5_entry_4_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_5_entry_4_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_5_entry_5_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_5_entry_5_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_5_entry_6_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_5_entry_6_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_5_entry_7_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_5_entry_7_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_5_entry_8_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_5_entry_8_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_5_entry_9_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_5_entry_9_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
			KIR_diary_SG_protag_5_entry_10_button_click = {
				set_variable = { KIR_diary_SG_entry_var = KIR_diary_SG_protag_5_entry_10_var }
				add_to_variable = { KIR_diary_SG_DIRTY = 1 }
			}
		}
	}
	
	KIR_great_leap_decision_image = {
		context_type = decision_category
		parent_window_token = decision_tab
		
		visible = {
			ROOT = {
				original_tag = KIR
				has_completed_focus = KIR_focus_3b
			}
		}
		
		window_name = "KIR_great_leap_decision_window"
	}
	
	KIS_nakp_treasury_image = {
		context_type = decision_category
		parent_window_token = decision_tab
		
		visible = {
			ROOT = {
				original_tag = KIS
				has_country_flag = KIS_unlocked_treasury
			}
		}
		
		window_name = "KIS_nakp_treasury_window"
		
		triggers = {
			KIS_nakp_treasury_current_balance_gold_coin_visible = {
				check_variable = { KIS.TreasuryWealth > 0 }
				NOT = { check_variable = { KIS.TreasuryWealth = 0 } }
			}
			KIS_nakp_treasury_current_balance_background_visible = {
				check_variable = { KIS.TreasuryWealth > 0 }
				NOT = { check_variable = { KIS.TreasuryWealth = 0 } }
			}
			KIS_nakp_treasury_current_balance_coins_amount_visible = {
				check_variable = { KIS.TreasuryWealth > 0 }
				NOT = { check_variable = { KIS.TreasuryWealth = 0 } }
			}
			
			KIS_nakp_treasury_debt_balance_gold_coin_visible = {
				check_variable = { KIS.TreasuryDebt > 0 }
				NOT = { check_variable = { KIS.TreasuryDebt = 0 } }
			}
			KIS_nakp_treasury_debt_balance_background_visible = {
				check_variable = { KIS.TreasuryDebt > 0 }
				NOT = { check_variable = { KIS.TreasuryDebt = 0 } }
			}
			KIS_nakp_treasury_debt_balance_debt_amount_visible = {
				check_variable = { KIS.TreasuryDebt > 0 }
				NOT = { check_variable = { KIS.TreasuryDebt = 0 } }
			}
			
			KIS_nakp_treasury_last_month_income_coin_visible = {
				check_variable = { KIS.TreasuryIncome > 0 }
				NOT = { check_variable = { KIS.TreasuryIncome = 0 } }
			}
			KIS_nakp_treasury_last_month_income_background_visible = {
				check_variable = { KIS.TreasuryIncome > 0 }
				NOT = { check_variable = { KIS.TreasuryIncome = 0 } }
			}
			KIS_nakp_treasury_last_month_income_income_amount_visible = {
				check_variable = { KIS.TreasuryIncome > 0 }
				NOT = { check_variable = { KIS.TreasuryIncome = 0 } }
			}
		}
	}
	
	KIS_plebiscite_progress_bar_GUI = {
		context_type = decision_category
		parent_window_token = decision_tab
		
		visible = {
			ROOT = {
				original_tag = KIS
				has_country_flag = KIS_northern_compact_plebiscite_begun
			}
		}
		
		window_name = "KIS_plebiscite_progress_bar_GUI_window"

		properties = {
			KIS_plebiscite_progress_bar = {
				frame = KIS.KIS_plebiscite_average_popular_support
			}
		}
	}
	
	KIS_state_corporate_vassal_GUI = {
		context_type = selected_state_context
		parent_window_token = selected_state_view
		
		visible = {
			ROOT = { 
				original_tag = KIS
				has_country_flag = KIS_state_corporate_vassal_GUI_enabled_flag
			}
			if = {
				limit = {
					KIS = {
						has_country_flag = KIS_state_corporate_vassal_GUI_enabled_for_puppets_flag
					}
				}
				OR = {
					is_controlled_by = KIS
					AND = {
						owner = {
							is_subject_of = KIS
						}
						is_controlled_by = owner
					}
				}
			}
			else_if = {
				limit = {
					KIS = {
						NOT = {
							has_country_flag = KIS_state_corporate_vassal_GUI_enabled_for_puppets_flag
						}
					}
				}
				is_controlled_by = KIS
			}
		}
		
		window_name = "KIS_state_corporate_vassal_GUI_container"
		
		dirty = KIS_state_corporate_vassal_SG_DIRTY
		
		effects = {
			KIS_state_corporate_vassal_GUI_selection_button_click = {
				ROOT = {
					set_country_flag = KIS_state_corporate_vassal_GUI_selection_menu_flag
					add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
				}
			}
		}
		
		triggers = {
			KIS_state_corporate_vassal_SYCEE_visible = {
				THIS = {
					has_state_flag = KIS_selected_SYCEE_state_flag
				}
			}
			KIS_state_corporate_vassal_GUILD_visible = {
				THIS = {
					has_state_flag = KIS_selected_GUILD_state_flag
				}
			}
			KIS_state_corporate_vassal_SORGHUM_visible = {
				THIS = {
					has_state_flag = KIS_selected_SORGHUM_state_flag
				}
			}
			KIS_state_corporate_vassal_BULL_visible = {
				THIS = {
					has_state_flag = KIS_selected_BULL_state_flag
				}
			}
			KIS_state_corporate_vassal_RHAPSODY_visible = {
				THIS = {
					has_state_flag = KIS_selected_RHAPSODY_state_flag
				}
				ROOT = {
					NOT = {
						has_country_flag = KIR_rhapsody_arsenal_rebranded_available
					}
				}
			}
			KIS_state_corporate_vassal_RHAPSODY_rebranded_visible = {
				THIS = {
					has_state_flag = KIS_selected_RHAPSODY_state_flag
				}
				ROOT = {
					has_country_flag = KIR_rhapsody_arsenal_rebranded_available
				}
			}
			KIS_state_corporate_vassal_COLLEGIUM_visible = {
				THIS = {
					has_state_flag = KIS_selected_COLLEGIUM_state_flag
				}
			}
			KIS_state_corporate_vassal_CRANE_visible = {
				THIS = {
					has_state_flag = KIS_selected_CRANE_state_flag
				}
			}
			KIS_state_corporate_vassal_WINGLUCK_visible = {
				THIS = {
					has_state_flag = KIS_selected_WINGLUCK_state_flag
				}
			}
			KIS_state_corporate_vassal_FRAGRANCE_visible = {
				THIS = {
					has_state_flag = KIS_selected_FRAGRANCE_state_flag
				}
			}
			KIS_state_corporate_vassal_DREAMBOAT_visible = {
				THIS = {
					has_state_flag = KIS_selected_DREAMBOAT_state_flag
				}
			}
			KIS_state_corporate_vassal_SCARLET_visible = {
				THIS = {
					has_state_flag = KIS_selected_SCARLET_state_flag
				}
			}
			KIS_state_corporate_vassal_KIRIA_visible = {
				THIS = {
					has_state_flag = KIS_selected_KIRIA_state_flag
				}
			}
		}
	}
	
	KIS_state_corporate_vassal_selection_menu_GUI = {
		context_type = selected_state_context
		parent_window_token = selected_state_view
		
		visible = {
			ROOT = {
				original_tag = KIS
				has_country_flag = KIS_state_corporate_vassal_GUI_selection_menu_flag
			}
		}
		
		window_name = "KIS_state_corporate_vassal_selection_menu_GUI_container"
		
		dirty = KIS_state_corporate_vassal_SG_DIRTY
		
		effects = {
			KIS_state_corporate_vassal_selection_menu_close_button_click = {
				ROOT = {
					clr_country_flag = KIS_state_corporate_vassal_GUI_selection_menu_flag
				}
			}
			KIS_state_corporate_vassal_GUI_selection_SYCEE_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_SYCEE_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_SYCEE_state_flag
						add_dynamic_modifier = { modifier = KIS_SYCEE_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_SYCEE_button_frame = 2 }
					}
					ROOT = {
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_SYCEE_cost_var }
						add_to_variable = { KIS_SYCEE_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_SYCEE_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_SYCEE_state_flag
						remove_dynamic_modifier = { modifier = KIS_SYCEE_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_SYCEE_button_frame = 1 }
					}
					ROOT = {
						subtract_from_variable = { KIS_SYCEE_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_COLLEGIUM_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_COLLEGIUM_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_COLLEGIUM_state_flag
						add_dynamic_modifier = { modifier = KIS_COLLEGIUM_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_COLLEGIUM_button_frame = 2 }
					}
					ROOT = {
						add_dynamic_modifier = { modifier = KIS_COLLEGIUM_country_modifier }
						add_to_variable = { KIS_COLLEGIUM_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_COLLEGIUM_country_modifier_var
							min = 0
							max = 0.2
						}
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_COLLEGIUM_cost_var }
						add_to_variable = { KIS_COLLEGIUM_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_COLLEGIUM_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_COLLEGIUM_state_flag
						remove_dynamic_modifier = { modifier = KIS_COLLEGIUM_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_COLLEGIUM_button_frame = 1 }
					}
					ROOT = {
						subtract_from_variable = { KIS_COLLEGIUM_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_COLLEGIUM_country_modifier_var
							min = 0
							max = 0.2
						}
						subtract_from_variable = { KIS_COLLEGIUM_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_GUILD_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_GUILD_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_GUILD_state_flag
						add_dynamic_modifier = { modifier = KIS_GUILD_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_GUILD_button_frame = 2 }
					}
					ROOT = {
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_GUILD_cost_var }
						add_to_variable = { KIS_GUILD_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_GUILD_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_GUILD_state_flag
						remove_dynamic_modifier = { modifier = KIS_GUILD_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_GUILD_button_frame = 1 }
					}
					ROOT = {
						subtract_from_variable = { KIS_GUILD_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_SORGHUM_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_SORGHUM_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_SORGHUM_state_flag
						add_dynamic_modifier = { modifier = KIS_SORGHUM_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_SORGHUM_button_frame = 2 }
					}
					ROOT = {
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_SORGHUM_cost_var }
						add_to_variable = { KIS_SORGHUM_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_SORGHUM_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_SORGHUM_state_flag
						remove_dynamic_modifier = { modifier = KIS_SORGHUM_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_SORGHUM_button_frame = 1 }
					}
					ROOT = {
						subtract_from_variable = { KIS_SORGHUM_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_RHAPSODY_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_RHAPSODY_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_RHAPSODY_state_flag
						add_dynamic_modifier = { modifier = KIS_RHAPSODY_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_RHAPSODY_button_frame = 2 }
					}
					ROOT = {
						add_dynamic_modifier = { modifier = KIS_RHAPSODY_country_modifier }
						subtract_from_variable = { KIS_RHAPSODY_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_RHAPSODY_country_modifier_var
							min = -0.2
							max = 0
						}
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_RHAPSODY_cost_var }
						add_to_variable = { KIS_RHAPSODY_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_RHAPSODY_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_RHAPSODY_state_flag
						remove_dynamic_modifier = { modifier = KIS_RHAPSODY_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_RHAPSODY_button_frame = 1 }
					}
					ROOT = {
						add_to_variable = { KIS_RHAPSODY_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_RHAPSODY_country_modifier_var
							min = -0.2
							max = 0
						}
						subtract_from_variable = { KIS_RHAPSODY_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_BULL_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_BULL_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_BULL_state_flag
						add_dynamic_modifier = { modifier = KIS_BULL_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_BULL_button_frame = 2 }
					}
					ROOT = {
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_BULL_cost_var }
						add_to_variable = { KIS_BULL_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_BULL_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_BULL_state_flag
						remove_dynamic_modifier = { modifier = KIS_BULL_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_BULL_button_frame = 1 }
					}
					ROOT = {
						subtract_from_variable = { KIS_BULL_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_CRANE_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_CRANE_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_CRANE_state_flag
						add_dynamic_modifier = { modifier = KIS_CRANE_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_CRANE_button_frame = 2 }
					}
					ROOT = {
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_CRANE_cost_var }
						add_to_variable = { KIS_CRANE_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_CRANE_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_CRANE_state_flag
						remove_dynamic_modifier = { modifier = KIS_CRANE_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_CRANE_button_frame = 1 }
					}
					ROOT = {
						subtract_from_variable = { KIS_CRANE_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_WINGLUCK_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_WINGLUCK_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_WINGLUCK_state_flag
						add_dynamic_modifier = { modifier = KIS_WINGLUCK_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_WINGLUCK_button_frame = 2 }
					}
					ROOT = {
						add_dynamic_modifier = { modifier = KIS_WINGLUCK_country_modifier }
						subtract_from_variable = { KIS_WINGLUCK_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_WINGLUCK_country_modifier_var
							min = -0.2
							max = 0
						}
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_WINGLUCK_cost_var }
						add_to_variable = { KIS_WINGLUCK_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_WINGLUCK_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_WINGLUCK_state_flag
						remove_dynamic_modifier = { modifier = KIS_WINGLUCK_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_WINGLUCK_button_frame = 1 }
					}
					ROOT = {
						add_to_variable = { KIS_WINGLUCK_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_WINGLUCK_country_modifier_var
							min = -0.2
							max = 0
						}
						subtract_from_variable = { KIS_WINGLUCK_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_FRAGRANCE_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_FRAGRANCE_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_FRAGRANCE_state_flag
						set_variable = { KIS_state_corporate_vassal_GUI_selection_FRAGRANCE_button_frame = 2 }
					}
					ROOT = {
						add_dynamic_modifier = { modifier = KIS_FRAGRANCE_country_modifier }
						add_to_variable = { KIS_FRAGRANCE_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_FRAGRANCE_country_modifier_var
							min = 0
							max = 0.2
						}
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_FRAGRANCE_cost_var }
						add_to_variable = { KIS_FRAGRANCE_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_FRAGRANCE_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_FRAGRANCE_state_flag
						set_variable = { KIS_state_corporate_vassal_GUI_selection_FRAGRANCE_button_frame = 1 }
					}
					ROOT = {
						subtract_from_variable = { KIS_FRAGRANCE_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_FRAGRANCE_country_modifier_var
							min = 0
							max = 0.2
						}
						subtract_from_variable = { KIS_FRAGRANCE_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_DREAMBOAT_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_DREAMBOAT_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_DREAMBOAT_state_flag
						add_dynamic_modifier = { modifier = KIS_DREAMBOAT_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_DREAMBOAT_button_frame = 2 }
					}
					ROOT = {
						add_dynamic_modifier = { modifier = KIS_DREAMBOAT_country_modifier }
						add_to_variable = { KIS_DREAMBOAT_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_DREAMBOAT_country_modifier_var
							min = 0
							max = 0.2
						}
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_DREAMBOAT_cost_var }
						add_to_variable = { KIS_DREAMBOAT_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_DREAMBOAT_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_DREAMBOAT_state_flag
						remove_dynamic_modifier = { modifier = KIS_DREAMBOAT_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_DREAMBOAT_button_frame = 1 }
					}
					ROOT = {
						subtract_from_variable = { KIS_DREAMBOAT_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_DREAMBOAT_country_modifier_var
							min = 0
							max = 0.2
						}
						subtract_from_variable = { KIS_DREAMBOAT_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_SCARLET_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_SCARLET_state_flag
						}
					}
					THIS = {
						KIS_state_corporate_vassal_clear_other_vassals_effect = yes
						set_state_flag = KIS_selected_SCARLET_state_flag
						add_dynamic_modifier = { modifier = KIS_SCARLET_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_SCARLET_button_frame = 2 }
					}
					ROOT = {
						add_dynamic_modifier = { modifier = KIS_SCARLET_country_modifier }
						add_to_variable = { KIS_SCARLET_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_SCARLET_country_modifier_var
							min = 0
							max = 0.2
						}
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_SCARLET_cost_var }
						add_to_variable = { KIS_SCARLET_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_SCARLET_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_SCARLET_state_flag
						remove_dynamic_modifier = { modifier = KIS_SCARLET_state_modifier }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_SCARLET_button_frame = 1 }
					}
					ROOT = {
						subtract_from_variable = { KIS_SCARLET_country_modifier_var = 0.02 }
						clamp_variable = {
							var = KIS_SCARLET_country_modifier_var
							min = 0
							max = 0.2
						}
						subtract_from_variable = { KIS.KIS_SCARLET_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
			KIS_state_corporate_vassal_GUI_selection_KIRIA_button_click = {
				if = {
					limit = {
						NOT = {
							has_state_flag = KIS_selected_KIRIA_state_flag
						}
					}
					if = {
						limit = {
							THIS = {
								is_controlled_by = KIS
							}
							KIS = {
								has_country_flag = KIS_Corp_of_Kiria_core_state
							}
						}
						THIS = {
							KIS_state_corporate_vassal_clear_other_vassals_effect = yes
							set_state_flag = KIS_selected_KIRIA_state_flag
							add_dynamic_modifier = { modifier = KIS_KIRIA_state_modifier }
							set_variable = { KIS_state_corporate_vassal_GUI_selection_KIRIA_button_frame = 2 }
						}
					}
					if = {
						limit = {
							THIS = {
								is_controlled_by = KIS
							}
							KIS = {
								has_country_flag = KIS_Corp_of_Kiria_non_core_state
							}
						}
						THIS = {
							KIS_state_corporate_vassal_clear_other_vassals_effect = yes
							set_state_flag = KIS_selected_KIRIA_state_flag
							add_dynamic_modifier = { modifier = KIS_KIRIA_state_modifier_non_core }
							set_variable = { KIS_state_corporate_vassal_GUI_selection_KIRIA_button_frame = 2 }
						}
					}
					if = {
						limit = {
							THIS = {
								owner = {
									is_subject_of = KIS
								}
							}
						}
						THIS = {
							KIS_state_corporate_vassal_clear_other_vassals_effect = yes
							set_state_flag = KIS_selected_KIRIA_state_flag
							owner = {
								give_resource_rights = { receiver = KIS state = PREV }
								add_autonomy_score = {
									value = -200 
									localization = KIS_corporation_of_kiria_reason_autonomy_points
								}
							}
							set_variable = { KIS_state_corporate_vassal_GUI_selection_KIRIA_button_frame = 2 }
						}
					}
					ROOT = {
						subtract_from_variable = { KIS.TreasuryWealth = KIS.KIS_KIRIA_cost_var }
						add_to_variable = { KIS.KIS_KIRIA_cost_var = 1000 }
						add_to_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				else_if = {
					limit = {
						has_state_flag = KIS_selected_KIRIA_state_flag
					}
					THIS = {
						clr_state_flag = KIS_selected_KIRIA_state_flag
						remove_dynamic_modifier = { modifier = KIS_KIRIA_state_modifier }
						remove_dynamic_modifier = { modifier = KIS_KIRIA_state_modifier_non_core }
						KIS = { remove_resource_rights = PREV }
						set_variable = { KIS_state_corporate_vassal_GUI_selection_KIRIA_button_frame = 1 }
					}
					ROOT = {
						subtract_from_variable = { KIS.KIS_KIRIA_cost_var = 1000 }
						subtract_from_variable = { KIS_corporate_vassals_var = 1 }
					}
				}
				add_to_variable = { KIS_state_corporate_vassal_SG_DIRTY = 1 }
			}
		}
		
		triggers = {
			KIS_state_corporate_vassal_GUI_selection_SYCEE_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_SYCEE_cost_var
						compare = greater_than_or_equals
					}
					NOT = {
						OR = {
							STH = {
								exists = yes
							}
							KIS = {
								has_country_flag = KIS_CORPORATE_WAR_disable_revoke_milacc
							}
						}
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_GUILD_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_GUILD_cost_var
						compare = greater_than_or_equals
					}
					NOT = {
						OR = {
							KAG = {
								exists = yes
							}
							KIS = {
								has_country_flag = KIS_CORPORATE_WAR_disable_revoke_milacc
							}
						}
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_SORGHUM_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_SORGHUM_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_BULL_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_BULL_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_RHAPSODY_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_RHAPSODY_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_COLLEGIUM_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_COLLEGIUM_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_CRANE_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_CRANE_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_WINGLUCK_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_WINGLUCK_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_FRAGRANCE_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_FRAGRANCE_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_DREAMBOAT_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_DREAMBOAT_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_SCARLET_button_visible = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_SCARLET_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_KIRIA_button_visible = {
				ROOT = {
					has_country_flag = KIS_corporate_vassal_KIRIA_unlocked_flag
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_KIRIA_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			
			KIS_state_corporate_vassal_GUI_selection_SYCEE_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_SYCEE_cost_var
						compare = greater_than_or_equals
					}
					NOT = {
						OR = {
							STH = {
								exists = yes
							}
							KIS = {
								has_country_flag = KIS_CORPORATE_WAR_disable_revoke_milacc
							}
						}
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_GUILD_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_GUILD_cost_var
						compare = greater_than_or_equals
					}
					NOT = {
						OR = {
							KAG = {
								exists = yes
							}
							KIS = {
								has_country_flag = KIS_CORPORATE_WAR_disable_revoke_milacc
							}
						}
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_SORGHUM_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_SORGHUM_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_BULL_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_BULL_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_RHAPSODY_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_RHAPSODY_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_COLLEGIUM_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_COLLEGIUM_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_CRANE_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_CRANE_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_WINGLUCK_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_WINGLUCK_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_FRAGRANCE_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_FRAGRANCE_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_DREAMBOAT_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_DREAMBOAT_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_SCARLET_idea_icon_click_enabled = {
				ROOT = {
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_SCARLET_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_KIRIA_idea_icon_click_enabled = {
				ROOT = {
					has_country_flag = KIS_corporate_vassal_KIRIA_unlocked_flag
					check_variable = {
						var = KIS.TreasuryWealth
						value = KIS.KIS_KIRIA_cost_var
						compare = greater_than_or_equals
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_KIRIA_icon_visible = {
				ROOT = {
					has_country_flag = KIS_corporate_vassal_KIRIA_unlocked_flag
				}
			}
			KIRIA_textbox_visible = {
				ROOT = {
					has_country_flag = KIS_corporate_vassal_KIRIA_unlocked_flag
				}
			}
			KIRIA_COST_textbox_visible = {
				ROOT = {
					has_country_flag = KIS_corporate_vassal_KIRIA_unlocked_flag
				}
			}
			KIS_state_corporate_vassal_GUI_selection_KIRIA_idea_icon_visible = {
				ROOT = {
					has_country_flag = KIS_corporate_vassal_KIRIA_unlocked_flag
				}
			}
			KIS_state_corporate_vassal_GUI_selection_RHAPSODY_idea_icon_visible = {
				ROOT = {
					NOT = {
						has_country_flag = KIR_rhapsody_arsenal_rebranded_available
					}
				}
			}
			KIS_state_corporate_vassal_GUI_selection_RHAPSODY_idea_icon_rebranded_visible = {
				ROOT = {
					has_country_flag = KIR_rhapsody_arsenal_rebranded_available
				}
			}
		}
		
		properties = {
			KIS_state_corporate_vassal_GUI_selection_SYCEE_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_SYCEE_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_GUILD_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_GUILD_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_SORGHUM_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_SORGHUM_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_COLLEGIUM_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_COLLEGIUM_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_RHAPSODY_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_RHAPSODY_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_BULL_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_BULL_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_FRAGRANCE_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_FRAGRANCE_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_DREAMBOAT_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_DREAMBOAT_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_SCARLET_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_SCARLET_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_CRANE_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_CRANE_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_WINGLUCK_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_WINGLUCK_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_KIRIA_button = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_KIRIA_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_SYCEE_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_SYCEE_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_GUILD_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_GUILD_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_SORGHUM_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_SORGHUM_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_COLLEGIUM_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_COLLEGIUM_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_RHAPSODY_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_RHAPSODY_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_BULL_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_BULL_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_FRAGRANCE_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_FRAGRANCE_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_DREAMBOAT_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_DREAMBOAT_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_SCARLET_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_SCARLET_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_CRANE_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_CRANE_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_WINGLUCK_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_WINGLUCK_button_frame
			}
			KIS_state_corporate_vassal_GUI_selection_KIRIA_icon = {
				frame = THIS.KIS_state_corporate_vassal_GUI_selection_KIRIA_button_frame
			}
		}
	}
	
	KIC_state_actions_GUI = {
		context_type = selected_state_context
		parent_window_token = selected_state_view
		
		visible = {
			ROOT = { 
				original_tag = KIC
				OR = {
					has_country_flag = KIC_chose_agressive_offensive_route
					has_country_flag = KIC_chose_defensive_maneuver_route
				}
			}
			THIS = {
				OR = {
					region = 283
					region = 316
					region = 343
					region = 344
					region = 345
					region = 346
					region = 347
				}
			}
			if = {
				limit = {
					KIC = {
						has_country_flag = KIC_chose_agressive_offensive_route
					}
				}
				OR = {
					is_controlled_by = KIC
					AND = {
						owner = {
							is_subject_of = KIC
						}
						is_controlled_by = owner
					}
				}
			}
			else_if = {
				limit = {
					KIC = {
						has_country_flag = KIC_chose_defensive_maneuver_route
					}
				}
				## No Additional Checks
			}
		}
		
		window_name = "KIC_state_actions_GUI_container"
		
		dirty = KIC_state_actions_SG_DIRTY
		
		triggers = {
			KIC_state_actions_recruitment_button_visible = {
				KIC = {
					command_power > 14
					has_political_power > 24
				}
				THIS = {
					state_population > KIC.KIC_state_actions_recruitment_LIMIT_var ## 10x of KIC.KIC_state_actions_recruitment_POSITIVE_var
					check_variable = { KIC_state_actions_recruitment_COOLDOWN_var = 0 }
					is_fully_controlled_by = KIC
				}
			}
			KIC_state_actions_conscription_button_visible = {
				KIC = {
					has_country_flag = KIC_chose_agressive_offensive_route
					has_political_power > 49
					has_manpower > 1999
				}
				THIS = {
					state_population > KIC.KIC_state_actions_conscription_LIMIT_var ## 20x of KIC.KIC_state_actions_conscription_NEGATIVE_var
					check_variable = { KIC_state_actions_conscription_COOLDOWN_var = 0 }
					if = {
						limit = {
							NOT = {
								is_core_of = KIC
							}
						}
						is_fully_controlled_by = KIC
					}
					else_if = {
						limit = {
							is_core_of = KIC
						}
						is_controlled_by = KIC
					}
				}
			}
			KIC_uprising_preparation_button_visible = {
				KIC = {
					has_country_flag = KIC_chose_defensive_maneuver_route
					command_power > 29
					has_manpower > 1199
				}
				THIS = {
					NOT = {
						has_state_flag = KIC_uprising_prepared_flag
					}
					state_population > KIC.KIC_state_actions_uprising_LIMIT_var ## 20x of KIC.KIC_state_actions_uprising_NEGATIVE_var
					check_variable = { KIC_state_actions_uprising_COOLDOWN_var = 0 }
					if = {
						limit = {
							CONTROLLER = {
								NOT = {
									original_tag = KIC
								}
							}
						}
						CONTROLLER = {
							has_war_with = KIC
						}
						any_neighbor_state = {
							is_controlled_by = KIC
							PREV = {
								any_neighbor_state = {
									NOT = { state = PREV.PREV }
									is_controlled_by = KIC
								}
							}
						}
					}
				}
			}
			KIC_uprising_button_visible = {
				KIC = {
					has_country_flag = KIC_chose_defensive_maneuver_route
					has_political_power > 19
				}
				THIS = {
					has_state_flag = KIC_uprising_prepared_flag
					NOT = {
						is_controlled_by = KIC
					}
					CONTROLLER = {
						has_war_with = KIC
					}
					if = {
						limit = {
							CONTROLLER = {
								NOT = {
									original_tag = KIC
								}
							}
						}
						is_capital = no
					}
				}
			}
			KIC_uprising_preparation_button_icon_visible = {
				KIC = {
					has_country_flag = KIC_chose_defensive_maneuver_route
				}
				THIS = {
					NOT = {
						has_state_flag = KIC_uprising_prepared_flag
					}
				}
			}
			KIC_uprising_button_icon_visible = {
				KIC = {
					has_country_flag = KIC_chose_defensive_maneuver_route
				}
				THIS = {
					has_state_flag = KIC_uprising_prepared_flag
				}
			}
			KIC_conscription_button_icon_visible = {
				KIC = {
					has_country_flag = KIC_chose_agressive_offensive_route
				}
			}
		}
		
		ai_enabled = {
			original_tag = KIC
		}
		
		ai_test_interval = 48
		ai_test_scopes = test_self_controlled_states
		ai_test_scopes = test_enemy_controlled_states
		
		ai_weights = {
			KIC_state_actions_recruitment_button_click = {
				ai_will_do = { base = 1 }
				modifier = {
					add = 10
					NOT = { has_full_control_of_state = THIS }
				}
			}
			KIC_state_actions_conscription_button_click = {
				ai_will_do = { base = 1 }
			}
			KIC_uprising_preparation_button_click = {
				ai_will_do = { base = 1 }
				modifier = {
					add = -2
					has_political_power < 20
				}
			}
			KIC_uprising_button_click = {
				ai_will_do = { base = 1 }
				modifier = {
					add = 50
					has_state_flag = KIC_uprising_prepared_flag
				}
			}
		}
		
		effects = {
			KIC_state_actions_recruitment_button_click = {
				THIS = {
					add_manpower = KIC.KIC_state_actions_recruitment_NEGATIVE_var
					set_variable = { KIC_state_actions_recruitment_COOLDOWN_var = KIC.KIC_state_actions_recruitment_TIMEOUT_var }
					add_to_variable = { KIC_state_actions_SG_DIRTY = 1 }
				}
				KIC = {
					add_manpower = KIC.KIC_state_actions_recruitment_POSITIVE_var
					add_command_power = -15
					add_political_power = -25
				}
			}
			KIC_state_actions_conscription_button_click = {
				KIC = {
					save_current_manpower = yes
				}
				THIS = {
					add_manpower = KIC.KIC_state_actions_conscription_NEGATIVE_var
					create_unit = {
						division = "division_template = \"Militiakirin Banner\" start_equipment_factor = 0.5 start_experience_factor = 0" 
						owner = KIC
						count = KIC.KIC_state_actions_conscription_NUM_O_BANNERS_var
					}
					set_variable = { KIC_state_actions_conscription_COOLDOWN_var = KIC.KIC_state_actions_conscription_TIMEOUT_var }
					add_to_variable = { KIC_state_actions_SG_DIRTY = 1 }
				}
				KIC = {
					restore_previous_manpower = yes
					add_political_power = -50
					country_event = { id = kirin_utility.22 hours = 1 }
				}
			}
			KIC_uprising_preparation_button_click = {
				THIS = {
					set_state_flag = KIC_uprising_prepared_flag
					if = {
						limit = {
							THIS = {
								is_core_of = KIC
							}
						}
						add_dynamic_modifier = { modifier = KIC_uprising_brewing_core }
					}
					else_if = {
						limit = {
							THIS = {
								NOT = {
									is_core_of = KIC
								}
							}
						}
						add_dynamic_modifier = { modifier = KIC_uprising_brewing_non_core }
					}
					add_to_variable = { KIC_state_actions_SG_DIRTY = 1 }
				}
				KIC = {
					add_command_power = -30
					country_event = { id = kirin_utility.24 hours = 1 }
				}
			}
			KIC_uprising_button_click = {
				KIC = {
					save_current_manpower = yes
				}
				THIS = {
					add_manpower = KIC.KIC_state_actions_uprising_NEGATIVE_var
					meta_effect = {
						text = {
							THIS = {
								create_unit = {
									division = "name = \"1st [KIC_INCENDIARIES_STATE_NAME] Incendiaries\" division_template = \"Incendiary Banner\" start_experience_factor = 0.055 start_equipment_factor = 0.33" 
									owner = KIC
									count = 1
									allow_spawning_on_enemy_provs = yes
								}
								create_unit = {
									division = "name = \"2nd [KIC_INCENDIARIES_STATE_NAME] Incendiaries\" division_template = \"Incendiary Banner\" start_experience_factor = 0.05 start_equipment_factor = 0.33" 
									owner = KIC
									count = 1
									allow_spawning_on_enemy_provs = yes
								}
								create_unit = {
									division = "name = \"3rd [KIC_INCENDIARIES_STATE_NAME] Incendiaries\" division_template = \"Incendiary Banner\" start_experience_factor = 0.05 start_equipment_factor = 0.33" 
									owner = KIC
									count = 1
									allow_spawning_on_enemy_provs = yes
								}
							}
							if = {
								limit = {
									KIC = {
										check_variable = { KIC_state_actions_uprising_NUM_O_BANNERS_var > 3 }
									}
								}
								THIS = {
									create_unit = {
										division = "name = \"5th [KIC_INCENDIARIES_STATE_NAME] Incendiaries\" division_template = \"Incendiary Banner\" start_experience_factor = 0.055 start_equipment_factor = 0.33" 
										owner = KIC
										count = 1
										allow_spawning_on_enemy_provs = yes
									}
								}
							}
						}
						KIC_INCENDIARIES_STATE_NAME = "[THIS.GetName]"
					}
					set_variable = { KIC_state_actions_uprising_COOLDOWN_var = KIC.KIC_state_actions_uprising_TIMEOUT_var }
					add_to_variable = { KIC_state_actions_SG_DIRTY = 1 }
					clr_state_flag = KIC_uprising_prepared_flag
					if = {
						limit = {
							THIS = {
								NOT = {
									is_core_of = KIC
								}
							}
						}
						THIS = {
							state_event = {
								id = kirin_republic.18
								hours = 1
								trigger_for = owner
							}
							state_event = {
								id = kirin_republic.18
								hours = 1
								trigger_for = KIC
							}
						}
					}
				}
				KIC = {
					add_political_power = -20
					restore_previous_manpower = yes
				}
			}
		}
	}
	
	KIR_power_struggle_GUI = {
		context_type = decision_category
		parent_window_token = decision_tab
		
		visible = {
			ROOT = {
				original_tag = KIR
				has_country_flag = KIR_power_struggle_ongoing_flag
			}
		}
		
		window_name = "KIR_power_struggle_GUI_window"

		properties = {
			KIR_power_struggle_bar = {
				frame = KIR.KIR_power_struggle_WF_var
			}
		}
		
		triggers = {
			KIR_power_struggle_red_60_visible = {
				check_variable = {
					var = KIR_power_struggle_RS_var
					value = 60
					compare = greater_than_or_equals
				}
			}
			KIR_power_struggle_red_75_visible = {
				check_variable = {
					var = KIR_power_struggle_RS_var
					value = 75
					compare = greater_than_or_equals
				}
			}
			KIR_power_struggle_blue_60_visible = {
				check_variable = {
					var = KIR_power_struggle_WF_var
					value = 60
					compare = greater_than_or_equals
				}
			}
			KIR_power_struggle_blue_75_visible = {
				check_variable = {
					var = KIR_power_struggle_WF_var
					value = 75
					compare = greater_than_or_equals
				}
			}
		}
	}
	
	COC_power_struggle_GUI = {
		context_type = decision_category
		parent_window_token = decision_tab
		
		visible = {
			ROOT = {
				original_tag = KIC
				has_country_flag = KIC_children_of_concord_flag
			}
		}
		
		window_name = "COC_power_struggle_GUI_window"
		
		properties = {
			COC_PS_DS_Progress_Bar = {
				frame = COC_power_struggle_DR_Progress_Bar_var
			}
			COC_PS_KF_Progress_Bar = {
				frame = COC_power_struggle_KF_Progress_Bar_var
			}
		}
	}
}